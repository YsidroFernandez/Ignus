<div [@routerTransition]>
    <app-page-header [heading]="'Post-Servicio'" [icon]="'fa-bar-chart-o'"></app-page-header>
    <div class="row">
        <div class="col col-xl-12">
            <div class="card-header" style="position: relative; text-align: -webkit-center">
                Reportes Post-Servicio
            </div>

            <div class="row">
                <div class="col col-sm-4 text-center">
                    <div class="form-group text-center">
                        <label for="descripcion">Fecha Inicio</label>
                        <div class="input-group">
                            <input name="fecha_inicio" [bsConfig]="datePickerConfig"
                            type="text" [(ngModel)]="fechaI" class="form-control" placeholder="Fecha inicio *" bsDatepicker autocomplete="off"
                            required>
                        </div>
                    </div>
                </div>
                <div class="col col-sm-4 text-center">
                    <div class="form-group text-center">
                        <label for="descripcion">Fecha Fin</label>
                        <div class="input-group">
                            <input name="fecha_fin" [bsConfig]="datePickerConfig" type="text"
                                class="form-control" [(ngModel)]="fechaF" placeholder="Fecha fin *" bsDatepicker autocomplete="off" required>
                        </div>
                    </div>
                </div>

                <div class="col col-sm-4 text-center">
                    <div class="form-group text-center">
                        <label for="tipos">Estado</label>
                        <select class="form-control" name="state" id="state" [disabled]="lock" [(ngModel)]="solicitud.state"
                            #estado="ngModel" (change)="loadmunicipality(solicitud.state)">
                            <option *ngFor="let est of states" [value]="est.id">{{est.name}}</option>
                        </select>
                    </div>
                </div>

                <div class="col col-sm-4 text-center">
                    <div class="form-group text-center">
                        <label for="municipality">Municipio</label>
                        <select class="form-control" name="municipality" id="municipality"
                            [(ngModel)]="solicitud.municipality" [disabled]="lock" #municipality="ngModel"
                            (change)="loadparish(solicitud.municipality)">
                            <option *ngFor="let mun of municipalities" [value]="mun.id">{{mun.name}}</option>
                        </select>
                    </div>
                </div>
                <div class="col col-sm-4 text-center">
                    <div class="form-group text-center"><label class="ng-tns-c12-9" for="parish">Parroquia</label>
                        <select class="form-control" name="parish" id="parish" [disabled]="lock" [(ngModel)]="solicitud.parish"
                            required>
                            <option *ngFor="let parish of parishes" [value]="parish.id">{{parish.name}}</option>
                        </select>
                    </div>
                </div>


                <div class="col col-sm-4">
                    <span class="input-group-btn">
                        <button class="btn btn-success" type="button" (click)="prueba()" style="position: relative; top: 30px;  background: #1AB394;">
                            Generar
                        </button>
                    </span>
                </div>
            </div>

            <body *ngIf="view">
                    <div id="content" #content class="wide-card mdl-card mdl-shadow--2dp">
                            <div class="card-body">
                                <div class="card-body  table-responsive">
                                    <table class="card-body table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Nombres</th>
                                                <th>Apellidos</th>
                                                <th>Sexo</th>
                                                <th>Fecha de Registro</th>

                                            </tr>
                                        </thead>
                                        <tbody >
                                            <tr *ngFor="let hh of datos | paginate: { itemsPerPage: numPage, currentPage: pages }">
                                                <td>{{hh.nombre}}</td>
                                                <td>{{hh.apellido}}</td>
                                                <td>{{hh.sexo}}</td>
                                                <td>{{hh.fecha}}</td>
                                            </tr>


                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="mdl-card__actions mdl-card--border">
                                <div>
                                    <input type="button" class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" value="Exportar" (click)="downloadImagePDF()"/>
                                </div>
                          </div>
                </body>
        </div>
    </div>
    <div class="row mb-3" *ngIf="view">
            <div class="col-md-6">
            <pagination-template #p="paginationApi" (pageChange)="pages=$event">
                    <nav class="text-left" style="position: relative; left: 1.1rem;">
                        <ul class="pagination">
                            <li class="page-item" [class.disabled]="p.isFirstPage()">
                                <a class="page-link" (click)="p.previous()"> <span class="fa fa-angle-double-left"></span>
                                </a>
                            </li>

                            <li *ngFor="let page of p.pages" [class.current]="p.getCurrent() === page.value" class="page-item pagination-number"
                                [ngClass]="{'active' : p.getCurrent() === page.value}">
                                <a class="page-link" (click)="p.setCurrent(page.value)" *ngIf="p.getCurrent() !== page.value">
                                    {{ page.label }} </a>
                                <a class="page-link" *ngIf="p.getCurrent() === page.value"> {{ page.label }} </a>
                            </li>

                            <li class="page-item" [class.disabled]="p.isLastPage()">
                                <a class="page-link" (click)="p.next()"> <span class="fa fa-angle-double-right"></span> </a>
                            </li>
                        </ul>
                    </nav>
                </pagination-template>
            </div>
            <div class="col-md-6">
                </div>
    </div>
</div>
